# הגדרות אימות וסשן

## שמירה על חיבור משתמשים

האפליקציה משתמשת ב-Supabase Auth עם:
- `persistSession: true` – הסשן נשמר ב-localStorage
- `autoRefreshToken: true` – רענון אוטומטי של ה-JWT לפני תפוגה
- `detectSessionInUrl: true` – זיהוי סשן בחזרה מ-OAuth (Google)
- `storageKey: 'clasly-auth'` – מפתח ייעודי לאחסון

## אם משתמשים מתנתקים לעיתים קרובות

בדוק ב-[Supabase Dashboard](https://supabase.com/dashboard) → Authentication → Settings:

1. **JWT Expiry** – ברירת מחדל 3600 (שעה). Supabase מרענן אוטומטית לפני תפוגה.
2. **Single session per user** – אם מופעל, התחברות במכשיר חדש תנתק את המכשיר הישן.
3. **Inactivity timeout** / **Time-boxed sessions** – רק ב-Pro plan; אם מוגדרים, סשנים יכולים להסתיים.

ברירת המחדל של Supabase: refresh tokens אינם פגים, והסשן נשאר עד שהמשתמש מתנתק.

**סיבות אפשריות להתנתקות:**
- מחיקת localStorage (ניקוי מטמון, פרטיות)
- מצב פרטי/Incognito – הסשן נמחק בסגירת הדפדפן
- "Single session per user" מופעל והמשתמש נכנס ממכשיר אחר
